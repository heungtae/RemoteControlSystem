[2016-10-11 20:09:50.087] [DEBUG] libs.db.shutter - [get] found shutters documents: count= 4
[2016-10-11 20:09:50.088] [DEBUG] libs.db.shutter - [getShutter] found shutters document
[2016-10-11 20:09:50.089] [DEBUG] routes.shutter - [actionData] {"side":"Top","position":"First","alias":"천창-1중","autopriority":3,"step":0,"openpinnumber":40,"closepinnumber":38,"length":60,"stepNum":2,"motorrpm":4,"movelength":12,"runtime":75}
[2016-10-11 20:09:50.089] [DEBUG] routes.shutter - step=2 stepTime=75 settime=0
[2016-10-11 20:09:50.089] [DEBUG] routes.shutter - [addExecutingTask] false: null
[2016-10-11 20:09:50.090] [DEBUG] routes.shutter - [update] device play = false null
[2016-10-11 20:09:50.090] [DEBUG] libs.job.scheduleShutter - [job] Test emergency control(1) starting shutter: {
    "side": "Top",
    "position": "First",
    "step": 2,
    "settime": 0,
    "exectime": 0,
    "playpin": 0,
    "stoppin": 0,
    "command": "on",
    "conf": {
        "side": "Top",
        "position": "First",
        "alias": "천창-1중",
        "autopriority": 3,
        "step": 0,
        "openpinnumber": 40,
        "closepinnumber": 38,
        "length": 60,
        "stepNum": 2,
        "motorrpm": 4,
        "movelength": 12,
        "runtime": 75
    },
    "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
    "location": "Top-First",
    "stepDesc": "2 단계"
}
[2016-10-11 20:09:50.102] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:09:50.102] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:09:50.102] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:17:48.789] [INFO] routes.index - setting server.io
[2016-10-11 20:17:48.790] [INFO] routes.chart - setting server.io
[2016-10-11 20:17:48.790] [INFO] routes.shutter - setting server.io
[2016-10-11 20:17:48.791] [INFO] routes.sprinkler - setting server.io
[2016-10-11 20:17:48.791] [INFO] routes.scheduleShutter - setting server.io
[2016-10-11 20:17:48.791] [INFO] routes.scheduleSprinkler - setting server.io
[2016-10-11 20:17:48.792] [INFO] routes.notification - setting server.io
[2016-10-11 20:17:48.792] [INFO] routes.soilMoistureControl - setting server.io
[2016-10-11 20:17:48.792] [INFO] routes.temperatureControl - setting server.io
[2016-10-11 20:17:48.792] [INFO] routes.emergencyControl - setting server.io
[2016-10-11 20:17:48.793] [INFO] app - Express server listening on port 8090
[2016-10-11 20:17:50.583] [DEBUG] libs.store.file - [readSync] ./datas/emergencyControl.dat
[2016-10-11 20:17:50.583] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 1,
        "title": "Test emergency control",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 2,
        "Temperature-Outside-Value": 1,
        "Temperature-Outside-Oper": ">"
    }
]
[2016-10-11 20:17:50.584] [TRACE] libs.db.emergencyControl - [get] found emergency Control Docs length= 1
[2016-10-11 20:17:50.585] [TRACE] libs.db.emergencyControl - [get] found shutter config length= 4
[2016-10-11 20:17:50.585] [TRACE] ghConfig - [getEnvironmentConfig] sys === null : [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Soil",
        "alias": "토양 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lt",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Humidity",
        "zone": "Inside",
        "alias": "내부 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Ah",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Moisture",
        "zone": "Soil",
        "alias": "토양 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lh",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Rain",
        "zone": "Inside",
        "alias": "내부 레인",
        "type": "number",
        "connect": "zigbee",
        "param": "Ra",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:17:50.586] [TRACE] libs.db.emergencyControl - [get] found environment config length= 7
[2016-10-11 20:17:50.586] [DEBUG] libs.store.file - [readSync] ./datas/scheduleShutter.dat
[2016-10-11 20:17:50.586] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 3,
        "title": "Test shutter schedule control",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 6,
        "start": "06:00",
        "end": "10:00",
        "Temperature-Outside-Value": 3,
        "Temperature-Outside-Oper": ">"
    }
]
[2016-10-11 20:17:50.587] [TRACE] libs.db.scheduleShutter - [get] found schedule shutter: length= 1
[2016-10-11 20:17:50.587] [TRACE] libs.db.scheduleShutter - [get] found shutter configs: length= 4
[2016-10-11 20:17:50.588] [TRACE] ghConfig - [getEnvironmentConfig] sys ===shutter [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:17:50.588] [TRACE] libs.db.scheduleShutter - [get] found environment configs: length= 3
[2016-10-11 20:17:50.589] [DEBUG] libs.store.file - [readSync] ./datas/temperatureControl.dat
[2016-10-11 20:17:50.589] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 1,
        "title": "Test temperature control",
        "priority": "3",
        "side": "Bottom",
        "position": "First",
        "alias": "측창-1중  ",
        "period": 0.5,
        "wait": 10,
        "Temperature-Inside-Target": "2",
        "Temperature-Inside-Range": "3"
    }
]
[2016-10-11 20:17:50.589] [TRACE] libs.db.temperatureControl - [get] found temperature Control Docs length= 1
[2016-10-11 20:17:50.590] [TRACE] libs.db.temperatureControl - [get] found shutter config length= 4
[2016-10-11 20:17:50.590] [TRACE] ghConfig - [getEnvironmentConfig] sys ===temperature [
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    }
]
[2016-10-11 20:17:50.590] [TRACE] libs.db.temperatureControl - [get] found environment config: length= 1
[2016-10-11 20:17:50.590] [DEBUG] libs.job.scheduleShutter - [job] Emergency Control
[2016-10-11 20:17:50.591] [TRACE] libs.job.scheduleShutter - [job] Emergency Control: {
    "id": 1,
    "title": "Test emergency control",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 2,
    "Temperature-Outside-Value": 1,
    "Temperature-Outside-Oper": ">",
    "category": "emergency",
    "funcPriority": 1
}
[2016-10-11 20:17:50.591] [DEBUG] libs.job.scheduleShutter - [checkTime] start undefined, Test emergency control(1) : inTime= true
[2016-10-11 20:17:50.592] [TRACE] ghConfig - [getEnvironmentConfig] sys === null : [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Soil",
        "alias": "토양 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lt",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Humidity",
        "zone": "Inside",
        "alias": "내부 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Ah",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Moisture",
        "zone": "Soil",
        "alias": "토양 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lh",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Rain",
        "zone": "Inside",
        "alias": "내부 레인",
        "type": "number",
        "connect": "zigbee",
        "param": "Ra",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:17:50.592] [TRACE] libs.job.scheduleShutter - [checkEnvironment] Test emergency control(1) Environment configuration length : 7
[2016-10-11 20:17:50.593] [TRACE] libs.job.scheduleShutter - [checkEnvironment] Test emergency control(1) unitKey=Temperature-Outside-Value operKey=Temperature-Outside-Oper value=2
[2016-10-11 20:17:50.594] [TRACE] libs.job.scheduleShutter - [checkEnvironment] number type environment : Test emergency control(1) Result envCount(1) = check(1) UnitKey: Temperature-Outside-Value 2 > 1
[2016-10-11 20:17:50.594] [TRACE] libs.job.scheduleShutter - [checkEnvironment] result : Test emergency control(1) isEnvironment= true (외부 온도값이 2로 설정값 1 보다 큼; 
)
[2016-10-11 20:17:50.594] [DEBUG] libs.job.scheduleShutter - [job] condition : true
[2016-10-11 20:17:50.596] [TRACE] libs.job.scheduleShutter - [checkPriority] JobExecuteList[Top-First] == undefined, added Lists: {
    "id": 1,
    "title": "Test emergency control",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 2,
    "Temperature-Outside-Value": 1,
    "Temperature-Outside-Oper": ">",
    "category": "emergency",
    "funcPriority": 1,
    "conf": {
        "side": "Top",
        "position": "First",
        "alias": "천창-1중",
        "autopriority": 3,
        "step": 0,
        "openpinnumber": 40,
        "closepinnumber": 38,
        "length": 60,
        "stepNum": 2,
        "motorrpm": 4,
        "movelength": 12,
        "runtime": 0
    },
    "inTime": true,
    "isEnvironment": true,
    "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
    "isJobCompleted": false
}
[2016-10-11 20:17:50.596] [DEBUG] libs.job.scheduleShutter - [checkPriority] result: {
    "Top-First": {
        "id": 1,
        "title": "Test emergency control",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 2,
        "Temperature-Outside-Value": 1,
        "Temperature-Outside-Oper": ">",
        "category": "emergency",
        "funcPriority": 1,
        "conf": {
            "side": "Top",
            "position": "First",
            "alias": "천창-1중",
            "autopriority": 3,
            "step": 0,
            "openpinnumber": 40,
            "closepinnumber": 38,
            "length": 60,
            "stepNum": 2,
            "motorrpm": 4,
            "movelength": 12,
            "runtime": 0
        },
        "inTime": true,
        "isEnvironment": true,
        "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
        "isJobCompleted": false
    }
}
[2016-10-11 20:17:50.596] [DEBUG] libs.job.scheduleShutter - [job] Schedule Control
[2016-10-11 20:17:50.597] [TRACE] libs.job.scheduleShutter - [job] Schedule Control: {
    "id": 3,
    "title": "Test shutter schedule control",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 6,
    "start": "06:00",
    "end": "10:00",
    "Temperature-Outside-Value": 3,
    "Temperature-Outside-Oper": ">",
    "category": "schedule",
    "funcPriority": 2
}
[2016-10-11 20:17:50.598] [TRACE] libs.job.scheduleShutter - [checkTime] Test shutter schedule control(3) :  inTime= false now= Tue Oct 11 2016 20:17:50 GMT+0900 (KST) start=Tue Oct 11 2016 06:00:00 GMT+0900 (KST) end=Tue Oct 11 2016 10:00:59 GMT+0900 (KST)
[2016-10-11 20:17:50.599] [TRACE] ghConfig - [getEnvironmentConfig] sys === null : [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Soil",
        "alias": "토양 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lt",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Humidity",
        "zone": "Inside",
        "alias": "내부 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Ah",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Moisture",
        "zone": "Soil",
        "alias": "토양 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lh",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Rain",
        "zone": "Inside",
        "alias": "내부 레인",
        "type": "number",
        "connect": "zigbee",
        "param": "Ra",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:17:50.600] [TRACE] libs.job.scheduleShutter - [checkEnvironment] Test shutter schedule control(3) Environment configuration length : 7
[2016-10-11 20:17:50.601] [TRACE] libs.job.scheduleShutter - [checkEnvironment] Test shutter schedule control(3) unitKey=Temperature-Outside-Value operKey=Temperature-Outside-Oper value=2
[2016-10-11 20:17:50.601] [TRACE] libs.job.scheduleShutter - [checkEnvironment] number type environment : Test shutter schedule control(3) Result envCount(1) = check(0) UnitKey: Temperature-Outside-Value 2 > 3
[2016-10-11 20:17:50.601] [TRACE] libs.job.scheduleShutter - [checkEnvironment] result : Test shutter schedule control(3) isEnvironment= false ()
[2016-10-11 20:17:50.602] [DEBUG] libs.job.scheduleShutter - [job] condition : false
[2016-10-11 20:17:50.602] [DEBUG] libs.job.scheduleShutter - [job] Temperature Control
[2016-10-11 20:17:50.602] [TRACE] libs.job.scheduleShutter - [job] Temperature Control: {
    "id": 1,
    "title": "Test temperature control",
    "priority": "3",
    "side": "Bottom",
    "position": "First",
    "alias": "측창-1중  ",
    "period": 0.5,
    "wait": 10,
    "Temperature-Inside-Target": "2",
    "Temperature-Inside-Range": "3",
    "category": "auto",
    "funcPriority": 3
}
[2016-10-11 20:17:50.602] [DEBUG] libs.job.scheduleShutter - [checkTime] start undefined, Test temperature control(1) : inTime= true
[2016-10-11 20:17:50.603] [TRACE] libs.job.scheduleShutter - [checkTempTime] nextTempRuntime = undefined
[2016-10-11 20:17:50.603] [DEBUG] libs.job.scheduleShutter - [job] Execute List : {
    "Top-First": {
        "id": 1,
        "title": "Test emergency control",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 2,
        "Temperature-Outside-Value": 1,
        "Temperature-Outside-Oper": ">",
        "category": "emergency",
        "funcPriority": 1,
        "conf": {
            "side": "Top",
            "position": "First",
            "alias": "천창-1중",
            "autopriority": 3,
            "step": 0,
            "openpinnumber": 40,
            "closepinnumber": 38,
            "length": 60,
            "stepNum": 2,
            "motorrpm": 4,
            "movelength": 12,
            "runtime": 0
        },
        "inTime": true,
        "isEnvironment": true,
        "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
        "isJobCompleted": false
    }
}
