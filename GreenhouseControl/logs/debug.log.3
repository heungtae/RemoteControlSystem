[2016-10-11 20:07:20.430] [TRACE] libs.db.emergencyControl - [get] found environment config length= 7
[2016-10-11 20:07:20.430] [DEBUG] libs.store.file - [readSync] ./datas/scheduleShutter.dat
[2016-10-11 20:07:20.430] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 3,
        "title": "test 3",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 6,
        "start": "06:00",
        "end": "10:00",
        "Temperature-Outside-Value": 3,
        "Temperature-Outside-Oper": ">"
    }
]
[2016-10-11 20:07:20.431] [TRACE] libs.db.scheduleShutter - [get] found schedule shutter: length= 1
[2016-10-11 20:07:20.431] [TRACE] libs.db.scheduleShutter - [get] found shutter configs: length= 4
[2016-10-11 20:07:20.431] [TRACE] ghConfig - [getEnvironmentConfig] sys ===shutter [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:07:20.432] [TRACE] libs.db.scheduleShutter - [get] found environment configs: length= 3
[2016-10-11 20:07:20.433] [DEBUG] libs.store.file - [readSync] ./datas/temperatureControl.dat
[2016-10-11 20:07:20.433] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 1,
        "title": "test",
        "priority": "3",
        "side": "Bottom",
        "position": "First",
        "alias": "측창-1중  ",
        "period": 0.5,
        "wait": 10,
        "Temperature-Inside-Target": "2",
        "Temperature-Inside-Range": "3"
    }
]
[2016-10-11 20:07:20.433] [TRACE] libs.db.temperatureControl - [get] found temperature Control Docs length= 1
[2016-10-11 20:07:20.433] [TRACE] libs.db.temperatureControl - [get] found shutter config length= 4
[2016-10-11 20:07:20.433] [TRACE] ghConfig - [getEnvironmentConfig] sys ===temperature [
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    }
]
[2016-10-11 20:07:20.434] [TRACE] libs.db.temperatureControl - [get] found environment config: length= 1
[2016-10-11 20:07:20.434] [DEBUG] libs.job.scheduleShutter - [job] Emergency Control
[2016-10-11 20:07:20.434] [TRACE] libs.job.scheduleShutter - [job] Emergency Control{
    "id": 1,
    "title": "teat",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 2,
    "Temperature-Outside-Value": 1,
    "Temperature-Outside-Oper": ">",
    "category": "emergency",
    "funcPriority": 1
}
[2016-10-11 20:07:20.435] [DEBUG] libs.job.scheduleShutter - [checkTime] start undefined, teat(1) : inTime= true
[2016-10-11 20:07:20.436] [TRACE] ghConfig - [getEnvironmentConfig] sys === null : [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Soil",
        "alias": "토양 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lt",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Humidity",
        "zone": "Inside",
        "alias": "내부 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Ah",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Moisture",
        "zone": "Soil",
        "alias": "토양 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lh",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Rain",
        "zone": "Inside",
        "alias": "내부 레인",
        "type": "number",
        "connect": "zigbee",
        "param": "Ra",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:07:20.436] [TRACE] libs.job.scheduleShutter - [checkEnvironment] teat(1) Environment configuration length : 7
[2016-10-11 20:07:20.436] [TRACE] libs.job.scheduleShutter - [checkEnvironment] (1) teat unitKey=Temperature-Outside-Value operKey=Temperature-Outside-Oper value=2
[2016-10-11 20:07:20.436] [TRACE] libs.job.scheduleShutter - [checkEnvironment] number type environmentteat(1) Result envCount(1) = check(1) UnitKey: Temperature-Outside-Value 2 > 1
[2016-10-11 20:07:20.437] [TRACE] libs.job.scheduleShutter - [checkEnvironment] result : teat(1) isEnvironment= true (외부 온도값이 2로 설정값 1 보다 큼; 
)
[2016-10-11 20:07:20.437] [DEBUG] libs.job.scheduleShutter - [job] condition : true
[2016-10-11 20:07:20.438] [TRACE] libs.job.scheduleShutter - JobExecuteList[Top-First] == undefined, add List{"Top-First":{"id":1,"title":"teat","side":"Top","position":"First","alias":"천창-1중   ","step":2,"Temperature-Outside-Value":1,"Temperature-Outside-Oper":">","category":"emergency","funcPriority":1,"conf":{"side":"Top","position":"First","alias":"천창-1중","autopriority":3,"step":0,"openpinnumber":40,"closepinnumber":38,"length":60,"stepNum":2,"motorrpm":4,"movelength":12,"runtime":0},"inTime":true,"isEnvironment":true,"envDesc":"외부 온도값이 2로 설정값 1 보다 큼; \n","isJobCompleted":false}}
[2016-10-11 20:07:20.438] [DEBUG] libs.job.scheduleShutter - [checkPriority] result: {"Top-First":{"id":1,"title":"teat","side":"Top","position":"First","alias":"천창-1중   ","step":2,"Temperature-Outside-Value":1,"Temperature-Outside-Oper":">","category":"emergency","funcPriority":1,"conf":{"side":"Top","position":"First","alias":"천창-1중","autopriority":3,"step":0,"openpinnumber":40,"closepinnumber":38,"length":60,"stepNum":2,"motorrpm":4,"movelength":12,"runtime":0},"inTime":true,"isEnvironment":true,"envDesc":"외부 온도값이 2로 설정값 1 보다 큼; \n","isJobCompleted":false}}
[2016-10-11 20:07:20.438] [DEBUG] libs.job.scheduleShutter - [job] Schedule Control
[2016-10-11 20:07:20.439] [TRACE] libs.job.scheduleShutter - [job] Schedule Control{
    "id": 3,
    "title": "test 3",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 6,
    "start": "06:00",
    "end": "10:00",
    "Temperature-Outside-Value": 3,
    "Temperature-Outside-Oper": ">",
    "category": "schedule",
    "funcPriority": 2
}
[2016-10-11 20:07:20.440] [TRACE] libs.job.scheduleShutter - [checkTime] test 3(3) :  inTime= false now= Tue Oct 11 2016 20:07:20 GMT+0900 (KST) start=Tue Oct 11 2016 06:00:00 GMT+0900 (KST) end=Tue Oct 11 2016 10:00:59 GMT+0900 (KST)
[2016-10-11 20:07:20.441] [TRACE] ghConfig - [getEnvironmentConfig] sys === null : [
    {
        "unit": "Temperature",
        "zone": "Outside",
        "alias": "외부 온도",
        "type": "number",
        "connect": "gpio",
        "param": "28-03157454e5ff",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Inside",
        "alias": "내부 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "At",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": true,
            "sprinkler": false,
            "temperature": true
        },
        "value": 2
    },
    {
        "unit": "Temperature",
        "zone": "Soil",
        "alias": "토양 온도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lt",
        "defaultvalue": 0,
        "standardUnit": "℃",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Humidity",
        "zone": "Inside",
        "alias": "내부 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Ah",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Moisture",
        "zone": "Soil",
        "alias": "토양 습도",
        "type": "number",
        "connect": "zigbee",
        "param": "Lh",
        "defaultvalue": 0,
        "standardUnit": "%",
        "use": {
            "shutter": false,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Rain",
        "zone": "Inside",
        "alias": "내부 레인",
        "type": "number",
        "connect": "zigbee",
        "param": "Ra",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": false,
            "sprinkler": false,
            "temperature": false
        },
        "value": 2
    },
    {
        "unit": "Light",
        "zone": "Inside",
        "alias": "일사",
        "type": "number",
        "connect": "zigbee",
        "param": "Li",
        "defaultvalue": 0,
        "standardUnit": "",
        "use": {
            "shutter": true,
            "sprinkler": true,
            "temperature": false
        },
        "value": 2
    }
]
[2016-10-11 20:07:20.442] [TRACE] libs.job.scheduleShutter - [checkEnvironment] test 3(3) Environment configuration length : 7
[2016-10-11 20:07:20.442] [TRACE] libs.job.scheduleShutter - [checkEnvironment] (3) test 3 unitKey=Temperature-Outside-Value operKey=Temperature-Outside-Oper value=2
[2016-10-11 20:07:20.443] [TRACE] libs.job.scheduleShutter - [checkEnvironment] number type environmenttest 3(3) Result envCount(1) = check(0) UnitKey: Temperature-Outside-Value 2 > 3
[2016-10-11 20:07:20.443] [TRACE] libs.job.scheduleShutter - [checkEnvironment] result : test 3(3) isEnvironment= false ()
[2016-10-11 20:07:20.443] [DEBUG] libs.job.scheduleShutter - [job] condition : false
[2016-10-11 20:07:20.443] [DEBUG] libs.job.scheduleShutter - [job] Temperature Control
[2016-10-11 20:07:20.444] [TRACE] libs.job.scheduleShutter - [job] Temperature Control{
    "id": 1,
    "title": "test",
    "priority": "3",
    "side": "Bottom",
    "position": "First",
    "alias": "측창-1중  ",
    "period": 0.5,
    "wait": 10,
    "Temperature-Inside-Target": "2",
    "Temperature-Inside-Range": "3",
    "category": "auto",
    "funcPriority": 3
}
[2016-10-11 20:07:20.444] [DEBUG] libs.job.scheduleShutter - [checkTime] start undefined, test(1) : inTime= true
[2016-10-11 20:07:20.444] [TRACE] libs.job.scheduleShutter - [checkTempTime] nextTempRuntime = undefined
[2016-10-11 20:07:20.445] [DEBUG] libs.job.scheduleShutter - [job] Execute List : {
    "Top-First": {
        "id": 1,
        "title": "teat",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 2,
        "Temperature-Outside-Value": 1,
        "Temperature-Outside-Oper": ">",
        "category": "emergency",
        "funcPriority": 1,
        "conf": {
            "side": "Top",
            "position": "First",
            "alias": "천창-1중",
            "autopriority": 3,
            "step": 0,
            "openpinnumber": 40,
            "closepinnumber": 38,
            "length": 60,
            "stepNum": 2,
            "motorrpm": 4,
            "movelength": 12,
            "runtime": 0
        },
        "inTime": true,
        "isEnvironment": true,
        "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
        "isJobCompleted": false
    }
}
[2016-10-11 20:07:20.445] [DEBUG] libs.job.scheduleShutter - [job] Execute doc : {
    "id": 1,
    "title": "teat",
    "side": "Top",
    "position": "First",
    "alias": "천창-1중   ",
    "step": 2,
    "Temperature-Outside-Value": 1,
    "Temperature-Outside-Oper": ">",
    "category": "emergency",
    "funcPriority": 1,
    "conf": {
        "side": "Top",
        "position": "First",
        "alias": "천창-1중",
        "autopriority": 3,
        "step": 0,
        "openpinnumber": 40,
        "closepinnumber": 38,
        "length": 60,
        "stepNum": 2,
        "motorrpm": 4,
        "movelength": 12,
        "runtime": 0
    },
    "inTime": true,
    "isEnvironment": true,
    "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
    "isJobCompleted": false
}
[2016-10-11 20:07:20.445] [DEBUG] libs.job.scheduleShutter - [getStep] teat(1) step :최대로 열겠습니다.
[2016-10-11 20:07:20.446] [DEBUG] routes.shutter - [Update] {"side":"Top","position":"First","step":2,"settime":0,"exectime":0,"playpin":0,"stoppin":0,"command":"on","conf":{"side":"Top","position":"First","alias":"천창-1중","autopriority":3,"step":0,"openpinnumber":40,"closepinnumber":38,"length":60,"stepNum":2,"motorrpm":4,"movelength":12,"runtime":0},"envDesc":"외부 온도값이 2로 설정값 1 보다 큼; \n"}
[2016-10-11 20:07:20.446] [DEBUG] routes.shutter - found shutter documents: count= 4
[2016-10-11 20:07:20.446] [TRACE] routes.shutter - { side: 'Top',
  position: 'First',
  alias: '천창-1중',
  autopriority: 3,
  step: 0,
  openpinnumber: 40,
  closepinnumber: 38,
  length: 60,
  stepNum: 2,
  motorrpm: 4,
  movelength: 12,
  runtime: 0 }
[2016-10-11 20:07:20.447] [TRACE] routes.shutter - found config
[2016-10-11 20:07:20.447] [TRACE] routes.shutter - { side: 'Top',
  position: 'First',
  alias: '천창-1중',
  autopriority: 3,
  step: 0,
  openpinnumber: 40,
  closepinnumber: 38,
  length: 60,
  stepNum: 2,
  motorrpm: 4,
  movelength: 12,
  runtime: 0 }
[2016-10-11 20:07:20.449] [DEBUG] libs.store.file - [readSync] ./datas/shutter.dat
[2016-10-11 20:07:20.449] [TRACE] libs.store.file - [readSync] read data, [
    {
        "date": "2016-03-17T13:11:34.054Z",
        "side": "First",
        "position": "Top",
        "step": 0,
        "runtime": 0
    },
    {
        "date": "2016-03-17T13:20:54.520Z",
        "side": "First",
        "position": "Bottom",
        "step": 0,
        "runtime": 0
    },
    {
        "date": "2016-09-23T11:27:17.321Z",
        "side": "Top",
        "position": "First",
        "step": 0,
        "runtime": 75
    }
]
[2016-10-11 20:07:20.449] [INFO] libs.store.shutter - [ { date: '2016-03-17T13:11:34.054Z',
    side: 'First',
    position: 'Top',
    step: 0,
    runtime: 0 },
  { date: '2016-03-17T13:20:54.520Z',
    side: 'First',
    position: 'Bottom',
    step: 0,
    runtime: 0 },
  { date: '2016-09-23T11:27:17.321Z',
    side: 'Top',
    position: 'First',
    step: 0,
    runtime: 75 } ]
[2016-10-11 20:07:20.451] [DEBUG] libs.db.shutter - [get] found shutters documents: count= 4
[2016-10-11 20:07:20.452] [DEBUG] libs.db.shutter - [getShutter] found shutters document
[2016-10-11 20:07:20.452] [DEBUG] routes.shutter - [actionData] {"side":"Top","position":"First","alias":"천창-1중","autopriority":3,"step":0,"openpinnumber":40,"closepinnumber":38,"length":60,"stepNum":2,"motorrpm":4,"movelength":12,"runtime":75}
[2016-10-11 20:07:20.453] [DEBUG] routes.shutter - step=2 stepTime=75 settime=0
[2016-10-11 20:07:20.453] [DEBUG] routes.shutter - [addExecutingTask] false: null
[2016-10-11 20:07:20.454] [DEBUG] routes.shutter - [update] device play = false null
[2016-10-11 20:07:20.454] [DEBUG] libs.job.scheduleShutter - [job] teat(1) starting shutter: {
    "side": "Top",
    "position": "First",
    "step": 2,
    "settime": 0,
    "exectime": 0,
    "playpin": 0,
    "stoppin": 0,
    "command": "on",
    "conf": {
        "side": "Top",
        "position": "First",
        "alias": "천창-1중",
        "autopriority": 3,
        "step": 0,
        "openpinnumber": 40,
        "closepinnumber": 38,
        "length": 60,
        "stepNum": 2,
        "motorrpm": 4,
        "movelength": 12,
        "runtime": 75
    },
    "envDesc": "외부 온도값이 2로 설정값 1 보다 큼; \n",
    "location": "Top-First",
    "stepDesc": "2 단계"
}
[2016-10-11 20:07:20.466] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:07:20.466] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:07:20.467] [TRACE] libs.job.scheduleShutter - [clearJobCompletedList] Job Completed List :[1]
[2016-10-11 20:07:22.418] [DEBUG] libs.telegram - { message_id: 10923,
  from: 
   { id: 167537300,
     first_name: '비닐하우스알림',
     username: 'GreenhouseAlertBot' },
  chat: 
   { id: 189659617,
     first_name: '흥태',
     last_name: '김',
     username: 'heungtae',
     type: 'private' },
  date: 1476184042,
  text: 'teat으로 예약된 창 제어를 시작했습니다. \n 천창-1중를 최대로 열겠습니다. \n외부 온도값이 2로 설정값 1 보다 큼;' }
[2016-10-11 20:09:44.254] [INFO] routes.index - setting server.io
[2016-10-11 20:09:44.256] [INFO] routes.chart - setting server.io
[2016-10-11 20:09:44.256] [INFO] routes.shutter - setting server.io
[2016-10-11 20:09:44.257] [INFO] routes.sprinkler - setting server.io
[2016-10-11 20:09:44.257] [INFO] routes.scheduleShutter - setting server.io
[2016-10-11 20:09:44.258] [INFO] routes.scheduleSprinkler - setting server.io
[2016-10-11 20:09:44.258] [INFO] routes.notification - setting server.io
[2016-10-11 20:09:44.258] [INFO] routes.soilMoistureControl - setting server.io
[2016-10-11 20:09:44.258] [INFO] routes.temperatureControl - setting server.io
[2016-10-11 20:09:44.259] [INFO] routes.emergencyControl - setting server.io
[2016-10-11 20:09:44.259] [INFO] app - Express server listening on port 8090
[2016-10-11 20:09:50.054] [DEBUG] libs.store.file - [readSync] ./datas/emergencyControl.dat
[2016-10-11 20:09:50.054] [TRACE] libs.store.file - [readSync] read data, [
    {
        "id": 1,
        "title": "Test emergency control",
        "side": "Top",
        "position": "First",
        "alias": "천창-1중   ",
        "step": 2,
        "Temperature-Outside-Value": 1,
        "Temperature-Outside-Oper": ">"
    }
]
